{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/user.service\";\nimport * as i2 from \"../services/product.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction UserAuthComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"h4\", 5);\n    i0.ɵɵtext(3, \"Discover Exclusive NFTs\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 6);\n    i0.ɵɵtext(5, \"Sign Up for Exclusive NFTs\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 7);\n    i0.ɵɵtext(7, \" Explore a world of unique digital assets. Find exclusive NFTs, sell your own, or dive into the NFT community's creativity. \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"form\", 8, 9);\n    i0.ɵɵlistener(\"ngSubmit\", function UserAuthComponent_div_1_Template_form_ngSubmit_8_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const _r2 = i0.ɵɵreference(9);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.signUp(_r2.value));\n    });\n    i0.ɵɵelementStart(10, \"div\", 10);\n    i0.ɵɵelement(11, \"input\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 10);\n    i0.ɵɵelement(13, \"input\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 10);\n    i0.ɵɵelement(15, \"input\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 14);\n    i0.ɵɵtext(17, \"Sign Up\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"p\", 15);\n    i0.ɵɵlistener(\"click\", function UserAuthComponent_div_1_Template_p_click_18_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.openLogin());\n    });\n    i0.ɵɵtext(19, \"Already Have an Account? Click Here to Login\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction UserAuthComponent_div_2_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Please enter a valid email\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserAuthComponent_div_2_span_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Please enter a valid password\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserAuthComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"div\", 4)(2, \"h4\", 5);\n    i0.ɵɵtext(3, \"Discover Exclusive NFTs\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 6);\n    i0.ɵɵtext(5, \"Login to Explore Exclusive NFTs\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 7);\n    i0.ɵɵtext(7, \" Explore a world of unique digital assets. Find exclusive NFTs, sell your own, or dive into the NFT community's creativity. \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"p\", 17);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"form\", 8, 18);\n    i0.ɵɵlistener(\"ngSubmit\", function UserAuthComponent_div_2_Template_form_ngSubmit_10_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const _r6 = i0.ɵɵreference(11);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.login(_r6.value));\n    });\n    i0.ɵɵelementStart(12, \"div\", 10);\n    i0.ɵɵelement(13, \"input\", 19, 20);\n    i0.ɵɵelementStart(15, \"p\", 21);\n    i0.ɵɵtemplate(16, UserAuthComponent_div_2_span_16_Template, 2, 0, \"span\", 22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 10);\n    i0.ɵɵelement(18, \"input\", 23, 24);\n    i0.ɵɵelementStart(20, \"p\", 21);\n    i0.ɵɵtemplate(21, UserAuthComponent_div_2_span_21_Template, 2, 0, \"span\", 22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"button\", 25);\n    i0.ɵɵtext(23, \"Login\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"p\", 15);\n    i0.ɵɵlistener(\"click\", function UserAuthComponent_div_2_Template_p_click_24_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.openSignUp());\n    });\n    i0.ɵɵtext(25, \"Don't have an account? Click here to Sign-Up\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const _r6 = i0.ɵɵreference(11);\n    const _r7 = i0.ɵɵreference(14);\n    const _r9 = i0.ɵɵreference(19);\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(ctx_r1.authError);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", _r7.invalid && _r7.touched);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", _r9.invalid && _r9.touched);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", _r6.invalid);\n  }\n}\nexport let UserAuthComponent = /*#__PURE__*/(() => {\n  class UserAuthComponent {\n    constructor(user, product) {\n      this.user = user;\n      this.product = product;\n      this.showLogin = true; // Flag to toggle between login and signup forms\n      this.authError = ''; // A message to display authentication errors\n    }\n\n    ngOnInit() {\n      // Initialize user authentication status when the component loads\n      this.user.userAuthReload();\n    }\n    signUp(data) {\n      // Function to handle user signup\n      this.user.userSignUp(data);\n    }\n    login(data) {\n      // Function to handle user login\n      this.user.userLogin(data);\n      // Subscribe to invalid user authentication events\n      this.user.invalidUserAuth.subscribe(result => {\n        console.warn(result);\n        if (result) {\n          // Display an error message if the user is not found\n          this.authError = 'User not found';\n        } else {\n          // If authentication is successful, transfer local cart data to the remote cart\n          this.localCartToRemoteCart();\n        }\n      });\n    }\n    openSignUp() {\n      // Function to switch to the signup form\n      this.showLogin = false;\n    }\n    openLogin() {\n      // Function to switch to the login form\n      this.showLogin = true;\n    }\n    localCartToRemoteCart() {\n      // Function to transfer local cart data to the remote cart when a user logs in\n      let data = localStorage.getItem('localCart');\n      let user = localStorage.getItem('user');\n      let userId = user && JSON.parse(user).id;\n      if (data) {\n        // Parse the local cart data\n        let cartDataList = JSON.parse(data);\n        cartDataList.forEach((product, index) => {\n          // Prepare cart data to be added to the remote cart\n          let cartData = {\n            ...product,\n            productId: product.id,\n            userId\n          };\n          delete cartData.id;\n          // Add each product to the remote cart with a delay for smooth execution\n          setTimeout(() => {\n            this.product.addToCart(cartData).subscribe(result => {\n              if (result) {\n                console.warn('Product data is stored in the database');\n              }\n            });\n          }, 500);\n          // Remove local cart data after transferring\n          if (cartDataList.length === index + 1) {\n            localStorage.removeItem('localCart');\n          }\n        });\n      }\n      // Refresh the user's cart list after transferring data to the remote cart\n      setTimeout(() => {\n        this.product.getCartList(userId);\n      }, 2000);\n    }\n    static #_ = this.ɵfac = function UserAuthComponent_Factory(t) {\n      return new (t || UserAuthComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.ProductService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: UserAuthComponent,\n      selectors: [[\"app-user-auth\"]],\n      decls: 3,\n      vars: 2,\n      consts: [[1, \"user-auth\"], [\"class\", \"sign-up\", 4, \"ngIf\"], [\"class\", \"login\", 4, \"ngIf\"], [1, \"sign-up\"], [1, \"heading-section\"], [1, \"heading-h4\"], [1, \"heading\"], [1, \"heading-p\"], [1, \"common-form\", 3, \"ngSubmit\"], [\"userSignUp\", \"ngForm\"], [1, \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"User Name\", \"name\", \"name\", \"ngModel\", \"\", \"required\", \"\", 1, \"form-control\"], [\"type\", \"email\", \"placeholder\", \"User Email\", \"name\", \"email\", \"ngModel\", \"\", \"required\", \"\", 1, \"form-control\"], [\"type\", \"password\", \"placeholder\", \"User Password\", \"name\", \"password\", \"ngModel\", \"\", \"required\", \"\", 1, \"form-control\"], [1, \"btn\", \"btn-primary\", \"btn-block\"], [1, \"auth-toggle-link\", \"mt-3\", 3, \"click\"], [1, \"login\"], [1, \"error-p\"], [\"userLogin\", \"ngForm\"], [\"type\", \"email\", \"placeholder\", \"User Email\", \"name\", \"email\", \"ngModel\", \"\", \"email\", \"\", \"required\", \"\", 1, \"form-control\"], [\"email\", \"ngModel\"], [1, \"invalid-input\"], [4, \"ngIf\"], [\"type\", \"password\", \"placeholder\", \"User Password\", \"name\", \"password\", \"ngModel\", \"\", \"minlength\", \"2\", \"maxlength\", \"20\", \"required\", \"\", 1, \"form-control\"], [\"password\", \"ngModel\"], [1, \"btn\", \"btn-primary\", \"btn-block\", 3, \"disabled\"]],\n      template: function UserAuthComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵtemplate(1, UserAuthComponent_div_1_Template, 20, 0, \"div\", 1);\n          i0.ɵɵtemplate(2, UserAuthComponent_div_2_Template, 26, 4, \"div\", 2);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.showLogin);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.showLogin);\n        }\n      },\n      dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.MinLengthValidator, i4.MaxLengthValidator, i4.EmailValidator, i4.NgModel, i4.NgForm],\n      styles: [\".auth-toggle-link[_ngcontent-%COMP%]{color:#f5f5f5;cursor:pointer;text-align:center}.user-auth[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:80px;color:#ffba00;text-align:center}.user-auth[_ngcontent-%COMP%]{margin-bottom:50px;margin-top:50px}.user-auth[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f5f5f5;cursor:pointer}.heading-section[_ngcontent-%COMP%]{justify-content:center;align-items:center;text-align:center}.heading-h4[_ngcontent-%COMP%]{color:#fff;text-transform:uppercase;font-size:14px}.heading[_ngcontent-%COMP%]{font-size:35px;font-weight:700;color:#ffba00}.heading-p[_ngcontent-%COMP%]{color:#a0a0a0;margin:.2rem 0 .2rem 1.5rem;font-size:1.1rem}\"]\n    });\n  }\n  return UserAuthComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}